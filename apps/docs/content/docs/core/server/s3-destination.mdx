---
title: S3 Destinations
description: 'Configure S3 buckets for backup storage. This includes setting up access keys, secret keys, bucket names, regions, and endpoints.'
---
import { Callout } from 'fumadocs-ui/components/callout';


The S3 Destinations section are essential for backing up your databases.

## Actions:

1. **Create**: Create a new S3 destination.
2. **Delete**: Delete a S3 destination.
3. **Edit**: Edit a S3 destination.
4. **Test**: Test a S3 destination.

### Create

In order to create a new S3 Bucket, you need to fill the form.

- **Name**: This could be anything you want, it will be the name.
- **Access Key**: This is the access key that you will use to access your bucket.
- **Secret Key**: This is the secret key that you will use to access your bucket.
- **Bucket**: This is the bucket that you will use to access your bucket.
- **Region**: This is the region that you will use to access your bucket.
- **Endpoint**: This is the endpoint that you will use to access your bucket.   

<Callout>
 There is a Button `Test` that will test the connection to your bucket, if it is correct it will show you a success message.
</Callout>



## Cloudflare Example R2 Bucket

This is an example of a bucket that you can use to store your backups.

1. Create a new bucket and any name you want.
2. Go to initial R2 Screen, and go to `Manager R2 API Tokens` and create a new token.
3. Set a Token Name
4. Set `Object Read & Write` Permission.
5. (Optional) Set Specify bucket, by default it will include all buckets.
6. Create the token.

Now copy the following variables:

- `Access Key` -> `Access Key (Dokploy)` = eg. `f3811c6d27415a9s6cv943b6743ad784`
- `Secret Key` -> `Secret Key (Dokploy)` = eg. `aa55ee40b4049e93b7252bf698408cc22a3c2856d2530s7c1cb7670e318f15e58`
- `Region` -> `Region (Dokploy)` = eg. `WNAM, ENAM, etc` it will depend on the region you are using.
- `Endpoint` -> `Endpoint (Dokploy)` = eg. `https://8ah554705io7842d54c499fbee1156c1c.r2.cloudflarestorage.com`
- `Bucket` -> `Bucket (Dokploy)` = eg. `dokploy-backups` use the name of the bucket you created.

Test the connection and you should see a success message.

## Backblaze B2 Example Bucket

1. Create a new bucket and set any name you want.
2. Go to `Application Keys` and create a new key.
3. Set a Key Name.
4. Set the Allow Access to Bucket(s) to `All Buckets` or `Specific Buckets`.
4. Set type of access `Read & Write` Permission.

Now copy the following variables:

- `Access Key` -> `Access Key (Dokploy)` = eg. `002s6acf2639910000d000005`
- `Secret Key` -> `Secret Key (Dokploy)` = eg. `K00+rIsWqPMhmcgqcyOyb9bqby7pbpE`
- `Region` -> `Region (Dokploy)` = eg. `eu-central-003, us-east-005, us-west-002, us-west-001, us-west-004, etc` it will depend on the region you are using.
- `Endpoint` -> `Endpoint (Dokploy)` = eg. `https://s3.us-west-002.backblazeb2.com` you will find this endpoint in the Bucket Card at the Home Page.
- `Bucket` -> `Bucket (Dokploy)` = eg. `dokploy-backups` use the name of the bucket you created.

Test the connection and you should see a success message.

## S3 Example Bucket

1. Create a new bucket and set any name you want.
2. Search for `IAM` in the search bar.
3. Click on `Policies` in the left menu.
4. Click on `Create Policy`.
5. Select `JSON` and paste the following policy:
Make sure to replace the bucket name with your bucket name.
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowListBucket",
      "Effect": "Allow",
      "Action": "s3:ListBucket",
      "Resource": "arn:aws:s3:::bucket-name"
    },
    {
      "Sid": "AllowBucketObjectActions",
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject"
      ],
      // Make sure to set the name of your bucket
      "Resource": "arn:aws:s3:::bucket-name/*"
    }
  ]
}
```
6. Click on `Review Policy`.
7. Assign a name to the policy.
8. Click on `Create Policy`.
9. Click on User Group and assign a Name.
10. Click on `Add User to Group`.
11. Add the user you want to assign to the group.
12. In the `Attached Policies` section, filter by type `Customer Managed` and select the policy you created.
13. Click on `Attach Policy`.
14. Go to `Users` and select the user you've assigned to the group.
15. Go to Security Credentials.
16. Click on `Create Access Key`.
17. Select `Programmatic Access`.
18. Click on `Create New Access Key`.

Now copy the following variables:

- `Access Key` -> `Access Key (Dokploy)` = eg. `AK2AV244NFLS5JTUZ554`
- `Secret Key` -> `Secret Key (Dokploy)` = eg. `I0GWCo9fSGOr7z6Lh+NvHmSsaE+62Vwk2ua2CEwR`
- `Bucket` -> `Bucket (Dokploy)` = eg. `dokploy-backups` use the name of the bucket you created.
- `Region` -> `Region (Dokploy)` = eg. `us-east-1, us-west-2, etc` it will depend on the region you are using.
- `Endpoint` -> `Endpoint (Dokploy) (Optional)` = eg. `https://<bucket-name>.s3.<region>.amazonaws.com` you will find this endpoint in the Bucket Card at the Home Page.


Test the connection and you should see a success message.